<!DOCTYPE HTML>
<html lang="zh_CN">
<head>
    

<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta name="keywords" content="Eureka配置大全, Asia">
    <meta name="description" content="Eureka客户端配置1、RegistryFetchIntervalSeconds
从 eureka 服务器注册表中获取注册信息的时间间隔（s），默认为 30 秒
2、InstanceInfoReplicationIntervalSecon">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Eureka配置大全 | Asia</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/css/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery-2.2.0.min.js"></script>
<link rel="stylesheet" href="/css/prism-base16-ateliersulphurpool.light.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>

</head>

<body>

<header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="container">
            <div class="nav-wrapper">
                <div class="brand-logo">
                    <a href="/" class="waves-effect waves-light">
                        
                        <img src="/medias/logo.png" class="logo-img hide-on-small-only">
                        
                        <span class="logo-span">Asia</span>
                    </a>
                </div>
                <a href="#" data-activates="mobile-nav" class="button-collapse"><i class="fa fa-navicon"></i></a>
<ul class="right">
    
    <li class="hide-on-med-and-down">
        <a href="/" class="waves-effect waves-light">
            
            <i class="fa fa-home"></i>
            
            <span>首页</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/tags" class="waves-effect waves-light">
            
            <i class="fa fa-tags"></i>
            
            <span>标签</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/categories" class="waves-effect waves-light">
            
            <i class="fa fa-bookmark"></i>
            
            <span>分类</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/utils" class="waves-effect waves-light">
            
            <i class="fa fa fa-book"></i>
            
            <span>工具</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/doc" class="waves-effect waves-light">
            
            <i class="fa fa fa-wordpress"></i>
            
            <span>文档</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/archives" class="waves-effect waves-light">
            
            <i class="fa fa-archive"></i>
            
            <span>归档</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/friends" class="waves-effect waves-light">
            
            <i class="fa fa-address-book"></i>
            
            <span>伙伴</span>
        </a>
    </li>
    
    <li>
        <a id="toggleSearch" class="waves-effect waves-light">
            <i id="searchIcon" class="mdi-action-search"></i>
        </a>
    </li>

</ul>

<div class="side-nav" id="mobile-nav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Asia</div>
        <div class="logo-desc">
            
            不心累
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li>
            <a href="/" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-home"></i>
                
                首页
            </a>
        </li>
        
        <li>
            <a href="/tags" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-tags"></i>
                
                标签
            </a>
        </li>
        
        <li>
            <a href="/categories" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-bookmark"></i>
                
                分类
            </a>
        </li>
        
        <li>
            <a href="/utils" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa fa-book"></i>
                
                工具
            </a>
        </li>
        
        <li>
            <a href="/doc" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa fa-wordpress"></i>
                
                文档
            </a>
        </li>
        
        <li>
            <a href="/archives" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-archive"></i>
                
                归档
            </a>
        </li>
        
        <li>
            <a href="/friends" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-address-book"></i>
                
                伙伴
            </a>
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/asiacuityz" class="waves-effect waves-light" target="_blank">
                <i class="fa fa-github-square fa-fw"></i>关于
            </a>
        </li>
        
    </ul>

    <div class="social-link"><a href="https://github.com/blinkfox" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
    <i class="fa fa-github"></i>
</a>
<a href="asiacuiyz@gmail.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
    <i class="fa fa-envelope-open"></i>
</a>
<a href="#!" class="tooltipped" data-tooltip="QQ联系我: 476494273" data-position="top" data-delay="50">
    <i class="fa fa-qq"></i>
</a>
</div>
</div>

            </div>
        </div>

        
        <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/asiacuityz" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="关于" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>
</header>





<div class="bg-cover post-cover" style="background-image: url('/medias/featureimages/13.jpg')">
    <div class="container">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <div class="description center-align post-title">
                        Eureka配置大全
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1,
    #articleContent h2,
    #articleContent h3,
    #articleContent h4,
    #articleContent h5,
    #articleContent h6 {
        padding-top: 76px;
        margin-top: -76px;
    }

    #articleContent h1 {
        line-height: 3.5rem;
    }

    #articleContent h2 {
        line-height: 3.2rem;
    }

    #articleContent h3 {
        line-height: 2.8rem;
    }

    #articleContent h4 {
        line-height: 2.5rem;
    }

    #articleContent h5 {
        line-height: 2.2rem;
    }

    #articleContent h6 {
        line-height: 1.9rem;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }
</style>
<div class="row">
    <div class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            
            <div class="article-tag">
                
                <a href="/tags/Spring-Cloud/" target="_blank">
                    <span class="chip bg-color">Spring Cloud</span>
                </a>
                
            </div>
            
            <div class="post-info">
                
                <span class="post-cate">
                    <i class="fa fa-bookmark fa-fw icon-category"></i>
                    
                    <a href="/categories/Eureka/" class="post-category" target="_blank">
                        Eureka
                    </a>
                    
                </span>
                

                <span class="post-date">
                    <i class="fa fa-clock-o fa-fw"></i>2019-01-28
                </span>
            </div>
        </div>
        <hr>
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="Eureka客户端配置"><a href="#Eureka客户端配置" class="headerlink" title="Eureka客户端配置"></a>Eureka客户端配置</h2><p>1、RegistryFetchIntervalSeconds</p>
<p>从 eureka 服务器注册表中获取注册信息的时间间隔（s），默认为 30 秒</p>
<p>2、InstanceInfoReplicationIntervalSeconds</p>
<p>复制实例变化信息到 eureka 服务器所需要的时间间隔（s），默认为 30 秒</p>
<p>3、InitialInstanceInfoReplicationIntervalSeconds</p>
<p>最初复制实例信息到 eureka 服务器所需的时间（s），默认为 40 秒</p>
<p>4、EurekaServiceUrlPollIntervalSeconds</p>
<p>询问 Eureka 服务 url 信息变化的时间间隔（s），默认为 300 秒</p>
<p>5、ProxyHost</p>
<p>获取 eureka 服务的代理主机，默认为 null</p>
<p>6、ProxyProxyPort</p>
<p>获取 eureka 服务的代理端口, 默认为 null </p>
<p> 7、ProxyUserName</p>
<p>获取 eureka 服务的代理用户名，默认为 null</p>
<p> 8、ProxyPassword</p>
<p>获取 eureka 服务的代理密码，默认为 null </p>
<p> 9、GZipContent</p>
<p> eureka 注册表的内容是否被压缩，默认为 true，并且是在最好的网络流量下被压缩</p>
<p>10、EurekaServerReadTimeoutSeconds</p>
<p>eureka 需要超时读取之前需要等待的时间，默认为 8 秒</p>
<p>11、EurekaServerConnectTimeoutSeconds</p>
<p>eureka 需要超时连接之前需要等待的时间，默认为 5 秒</p>
<p>12、BackupRegistryImpl</p>
<p>获取实现了 eureka 客户端在第一次启动时读取注册表的信息作为回退选项的实现名称</p>
<p>13、EurekaServerTotalConnections</p>
<p> eureka 客户端允许所有 eureka 服务器连接的总数目，默认是 200</p>
<p> 14、EurekaServerTotalConnectionsPerHost</p>
<p> eureka 客户端允许 eureka 服务器主机连接的总数目，默认是 50</p>
<p> 15、EurekaServerURLContext</p>
<p>表示 eureka 注册中心的路径，如果配置为 eureka，则为 <a href="http://x.x.x.x:x/eureka/，在" target="_blank" rel="noopener">http://x.x.x.x:x/eureka/，在</a> eureka 的配置文件中加入此配置表示 eureka 作为客户端向注册中心注册，从而构成 eureka 集群。此配置只有在 eureka 服务器 ip 地址列表是在 DNS 中才会用到，默认为 null</p>
<p>16、EurekaServerPort</p>
<p>获取 eureka 服务器的端口，此配置只有在 eureka 服务器 ip 地址列表是在 DNS 中才会用到。默认为 null</p>
<p>17、EurekaServerDNSName</p>
<p>获取要查询的 DNS 名称来获得 eureka 服务器，此配置只有在 eureka 服务器 ip 地址列表是在 DNS 中才会用到。默认为 null</p>
<p>18、UseDnsForFetchingServiceUrls</p>
<p>eureka 客户端是否应该使用 DNS 机制来获取 eureka 服务器的地址列表，默认为 false</p>
<p>19、RegisterWithEureka</p>
<p>实例是否在 eureka 服务器上注册自己的信息以供其他服务发现，默认为 true</p>
<p>20、PreferSameZoneEureka</p>
<p>实例是否使用同一 zone 里的 eureka 服务器，默认为 true，理想状态下，eureka 客户端与服务端是在同一 zone 下</p>
<p>21、AllowRedirects</p>
<p>服务器是否能够重定向客户端请求到备份服务器。 如果设置为 false，服务器将直接处理请求，如果设置为 true，它可能发送 HTTP 重定向到客户端。默认为 false</p>
<p>22、LogDeltaDiff</p>
<p>是否记录 eureka 服务器和客户端之间在注册表的信息方面的差异，默认为 false</p>
<p>23、DisableDelta(*)</p>
<p>默认为 false</p>
<p>24、fetchRegistryForRemoteRegions</p>
<p>eureka服务注册表信息里的以逗号隔开的地区名单，如果不这样返回这些地区名单，则客户端启动将会出错。默认为 null</p>
<p>25、Region</p>
<p>获取实例所在的地区。默认为 us-east-1</p>
<p>26、AvailabilityZones</p>
<p>获取实例所在的地区下可用性的区域列表，用逗号隔开。</p>
<p>27、EurekaServerServiceUrls</p>
<p>Eureka 服务器的连接，默认为 http：//XXXX：X/eureka/, 但是如果采用 DNS方式获取服务地址，则不需要配置此设置。</p>
<p>28、FilterOnlyUpInstances（*）</p>
<p>是否获得处于开启状态的实例的应用程序过滤之后的应用程序。默认为 true</p>
<p>29、EurekaConnectionIdleTimeoutSeconds</p>
<p>Eureka 服务的 http 请求关闭之前其响应的时间，默认为 30 秒</p>
<p>30、FetchRegistry</p>
<p>此客户端是否获取 eureka 服务器注册表上的注册信息，默认为 true</p>
<p>31、RegistryRefreshSingleVipAddress</p>
<p>此客户端只对一个单一的 VIP 注册表的信息感兴趣。默认为 null</p>
<p>32、HeartbeatExecutorThreadPoolSize(*)</p>
<p>心跳执行程序线程池的大小, 默认为 5</p>
<p>33、HeartbeatExecutorExponentialBackOffBound(*)</p>
<p>心跳执行程序回退相关的属性，是重试延迟的最大倍数值，默认为 10</p>
<p>34、CacheRefreshExecutorThreadPoolSize(*)</p>
<p>执行程序缓存刷新线程池的大小，默认为 5</p>
<p>35、CacheRefreshExecutorExponentialBackOffBound</p>
<p>执行程序指数回退刷新的相关属性，是重试延迟的最大倍数值，默认为 10</p>
<p>36、DollarReplacement</p>
<p>eureka 服务器序列化 / 反序列化的信息中获取 “$” 符号的的替换字符串。默认为 “_-”</p>
<p>37、EscapeCharReplacement</p>
<p>eureka 服务器序列化 / 反序列化的信息中获取 “_” 符号的的替换字符串。默认为 “__”</p>
<p>38、OnDemandUpdateStatusChange（*）</p>
<p>如果设置为 true, 客户端的状态更新将会点播更新到远程服务器上，默认为 true</p>
<p>39、EncoderName</p>
<p>这是一个短暂的编码器的配置，如果最新的编码器是稳定的，则可以去除，默认为 null</p>
<p>40、DecoderName</p>
<p>这是一个短暂的解码器的配置，如果最新的解码器是稳定的，则可以去除，默认为 null</p>
<p>41、ClientDataAccept（*）</p>
<p>客户端数据接收</p>
<p>42、Experimental（*）</p>
<p>当尝试新功能迁移过程时，为了避免配置 API 污染，相应的配置即可投入实验配置部分，默认为 null</p>
<h2 id="Eureka微服务端配置"><a href="#Eureka微服务端配置" class="headerlink" title="Eureka微服务端配置"></a>Eureka微服务端配置</h2><p>1、InstanceId</p>
<p>此实例注册到 eureka 服务端的唯一的实例 ID, 其组成为 、<code>${spring.application.name}:${spring.application.instance_id:${random.value}}</code></p>
<p>2、Appname</p>
<p>获得在 eureka 服务上注册的应用程序的名字，默认为 unknow</p>
<p>3、AppGroupName</p>
<p>获得在 eureka 服务上注册的应用程序组的名字，默认为 unknow</p>
<p>4、InstanceEnabledOnit（*）</p>
<p>实例注册到 eureka 服务器时，是否开启通讯，默认为 false</p>
<p>5、NonSecurePort</p>
<p>获取该实例应该接收通信的非安全端口。默认为 80</p>
<p>6、SecurePort</p>
<p>获取该实例应该接收通信的安全端口，默认为 443</p>
<p>7、NonSecurePortEnabled</p>
<p>该实例应该接收通信的非安全端口是否启用，默认为 true</p>
<p>8、SecurePortEnabled</p>
<p>该实例应该接收通信的安全端口是否启用，默认为 false</p>
<p>9、LeaseRenewalIntervalInSeconds</p>
<p>eureka 客户需要多长时间发送心跳给 eureka 服务器，表明它仍然活着, 默认为 30 秒</p>
<p>10、LeaseExpirationDurationInSeconds</p>
<p>Eureka 服务器在接收到实例的最后一次发出的心跳后，需要等待多久才可以将此实例删除，默认为 90 秒</p>
<p>11、VirtualHostName</p>
<p>此实例定义的虚拟主机名，其他实例将通过使用虚拟主机名找到该实例。</p>
<p>12、SecureVirtualHostName</p>
<p>此实例定义的安全虚拟主机名</p>
<p>13、ASGName（*）</p>
<p>与此实例相关联 AWS 自动缩放组名称。此项配置是在 AWS环境专门使用的实例启动，它已被用于流量停用后自动把一个实例退出服务。</p>
<p>14、HostName</p>
<p>与此实例相关联的主机名，是其他实例可以用来进行请求的准确名称</p>
<p>15、MetadataMap(*)</p>
<p>获取与此实例相关联的元数据 (key,value)。这个信息被发送到 eureka 服务器，其他实例可以使用。</p>
<p>16、DataCenterInfo（*）</p>
<p>该实例被部署在数据中心</p>
<p>17、IpAddress</p>
<p>获取实例的 ip 地址</p>
<p>18、StatusPageUrlPath（*）</p>
<p>获取此实例状态页的 URL 路径，然后构造出主机名，安全端口等，默认为 /info</p>
<p>19、StatusPageUrl(*)</p>
<p>获取此实例绝对状态页的 URL 路径，为其他服务提供信息时来找到这个实例的状态的路径，默认为 null</p>
<p>20、HomePageUrlPath（*）</p>
<p>获取此实例的相关主页 URL 路径，然后构造出主机名，安全端口等，默认为 /</p>
<p>21、HomePageUrl(*)</p>
<p>获取此实例的绝对主页 URL 路径，为其他服务提供信息时使用的路径, 默认为 null</p>
<p>22、HealthCheckUrlPath</p>
<p>获取此实例的相对健康检查 URL 路径，默认为 /health</p>
<p>23、HealthCheckUrl</p>
<p>获取此实例的绝对健康检查 URL 路径, 默认为 null</p>
<p>24、SecureHealthCheckUrl</p>
<p>获取此实例的绝对安全健康检查网页的 URL 路径，默认为 null</p>
<p>25、DefaultAddressResolutionOrder</p>
<p>获取实例的网络地址，默认为 []</p>
<p>26、Namespace</p>
<p>获取用于查找属性的命名空间，默认为 eureka</p>
<p>Eureka服务端配置</p>
<p>1、AWSAccessId</p>
<p>获取 aws 访问的 id，主要用于弹性 ip 绑定，此配置是用于 aws 上的，默认为 null</p>
<p>2、AWSSecretKey</p>
<p>获取 aws 私有秘钥，主要用于弹性 ip 绑定，此配置是用于 aws 上的，默认为 null</p>
<p>3、EIPBindRebindRetries</p>
<p>获取服务器尝试绑定到候选的 EIP 的次数，默认为 3</p>
<p>4、EIPBindingRetryIntervalMsWhenUnbound(*)</p>
<p>服务器检查 ip 绑定的时间间隔，单位为毫秒，默认为 1 <em> 60 </em> 1000</p>
<p>5、EIPBindingRetryIntervalMs</p>
<p>与上面的是同一作用，仅仅是稳定状态检查，默认为 5 <em> 60 </em> 1000</p>
<p>6、EnableSelfPreservation</p>
<p>自我保护模式，当出现出现网络分区、eureka 在短时间内丢失过多客户端时，会进入自我保护模式，即一个服务长时间没有发送心跳，eureka 也不会将其删除，默认为 true</p>
<p>7、RenewalPercentThreshold(*)</p>
<p><img src="/images/微服务/952935-20170623150643570-1733575926.png" alt></p>
<p>阈值因子，默认是 0.85，如果阈值比最小值大，则自我保护模式开启</p>
<p>8、RenewalThresholdUpdateIntervalMs</p>
<p>阈值更新的时间间隔，单位为毫秒，默认为 15 <em> 60 </em> 1000</p>
<p>9、PeerEurekaNodesUpdateIntervalMs(*)</p>
<p>集群里 eureka 节点的变化信息更新的时间间隔，单位为毫秒，默认为 10 <em> 60 </em> 1000</p>
<p>10、EnableReplicatedRequestCompression</p>
<p>复制的数据在发送请求时是否被压缩，默认为 false</p>
<p>11、NumberOfReplicationRetries</p>
<p>获取集群里服务器尝试复制数据的次数，默认为 5</p>
<p>12、PeerEurekaStatusRefreshTimeIntervalMs</p>
<p>服务器节点的状态信息被更新的时间间隔，单位为毫秒，默认为 30 * 1000</p>
<p>13、WaitTimeInMsWhenSyncEmpty(*)</p>
<p>在 Eureka 服务器获取不到集群里对等服务器上的实例时，需要等待的时间，单位为毫秒，默认为 1000 <em> 60 </em> 5</p>
<p>14、PeerNodeConnectTimeoutMs</p>
<p>连接对等节点服务器复制的超时的时间，单位为毫秒，默认为 200</p>
<p>15、PeerNodeReadTimeoutMs</p>
<p>读取对等节点服务器复制的超时的时间，单位为毫秒，默认为 200</p>
<p>16、PeerNodeTotalConnections</p>
<p>获取对等节点上 http 连接的总数，默认为 1000</p>
<p>17、PeerNodeTotalConnectionsPerHost(*)</p>
<p>获取特定的对等节点上 http 连接的总数，默认为 500</p>
<p>18、PeerNodeConnectionIdleTimeoutSeconds(*)</p>
<p>http 连接被清理之后服务器的空闲时间，默认为 30 秒</p>
<p>19、RetentionTimeInMSInDeltaQueue(*)</p>
<p>客户端保持增量信息缓存的时间，从而保证不会丢失这些信息，单位为毫秒，默认为 3 <em> 60 </em> 1000</p>
<p>20、DeltaRetentionTimerIntervalInMs</p>
<p>清理任务程序被唤醒的时间间隔，清理过期的增量信息，单位为毫秒，默认为 30 * 1000</p>
<p>21、EvictionIntervalTimerInMs</p>
<p>过期实例应该启动并运行的时间间隔，单位为毫秒，默认为 60 * 1000</p>
<p>22、ASGQueryTimeoutMs（*）</p>
<p>查询 AWS 上 ASG（自动缩放组）信息的超时值，单位为毫秒，默认为 300</p>
<p>23、ASGUpdateIntervalMs</p>
<p>从 AWS 上更新 ASG 信息的时间间隔，单位为毫秒，默认为 5 <em> 60 </em> 1000</p>
<p>24、ASGCacheExpiryTimeoutMs(*)</p>
<p>缓存 ASG 信息的到期时间，单位为毫秒，默认为 10 <em> 60 </em> 1000</p>
<p>25、ResponseCacheAutoExpirationInSeconds（*）</p>
<p>当注册表信息被改变时，则其被保存在缓存中不失效的时间，默认为 180 秒</p>
<p>26、ResponseCacheUpdateIntervalMs（*）</p>
<p>客户端的有效负载缓存应该更新的时间间隔，默认为 30 * 1000 毫秒</p>
<p>27、UseReadOnlyResponseCache（*）</p>
<p>目前采用的是二级缓存策略，一个是读写高速缓存过期策略，另一个没有过期只有只读缓存，默认为 true，表示只读缓存</p>
<p>28、DisableDelta（*）</p>
<p>增量信息是否可以提供给客户端看，默认为 false</p>
<p>29、MaxIdleThreadInMinutesAgeForStatusReplication（*）</p>
<p>状态复制线程可以保持存活的空闲时间，默认为 10 分钟</p>
<p>30、MinThreadsForStatusReplication</p>
<p>被用于状态复制的线程的最小数目，默认为 1</p>
<p>31、MaxThreadsForStatusReplication</p>
<p>被用于状态复制的线程的最大数目，默认为 1</p>
<p>32、MaxElementsInStatusReplicationPool</p>
<p>可允许的状态复制池备份复制事件的最大数量，默认为 10000</p>
<p>33、SyncWhenTimestampDiffers</p>
<p>当时间变化实例是否跟着同步，默认为 true</p>
<p>34、RegistrySyncRetries</p>
<p>当 eureka 服务器启动时尝试去获取集群里其他服务器上的注册信息的次数，默认为 5</p>
<p>35、RegistrySyncRetryWaitMs</p>
<p>当 eureka 服务器启动时获取其他服务器的注册信息失败时，会再次尝试获取，期间需要等待的时间，默认为 30 * 1000 毫秒</p>
<p>36、MaxElementsInPeerReplicationPool（*）</p>
<p>复制池备份复制事件的最大数量，默认为 10000</p>
<p>37、MaxIdleThreadAgeInMinutesForPeerReplication（*）</p>
<p>复制线程可以保持存活的空闲时间，默认为 15 分钟</p>
<p>38、MinThreadsForPeerReplication（*）</p>
<p>获取将被用于复制线程的最小数目，默认为 5</p>
<p>39、MaxThreadsForPeerReplication</p>
<p>获取将被用于复制线程的最大数目，默认为 20</p>
<p>40、MaxTimeForReplication（*）</p>
<p>尝试在丢弃复制事件之前进行复制的时间，默认为 30000 毫秒</p>
<p>41、PrimeAwsReplicaConnections（*）</p>
<p>对集群中服务器节点的连接是否应该准备，默认为 true</p>
<p>42、DisableDeltaForRemoteRegions（*）</p>
<p>增量信息是否可以提供给客户端或一些远程地区，默认为 false</p>
<p>43、RemoteRegionConnectTimeoutMs（*）</p>
<p>连接到对等远程地 eureka 节点的超时时间，默认为 1000 毫秒</p>
<p>44、RemoteRegionReadTimeoutMs（*）</p>
<p>获取从远程地区 eureka 节点读取信息的超时时间，默认为 1000 毫秒</p>
<p>45、RemoteRegionTotalConnections</p>
<p>获取远程地区对等节点上 http 连接的总数，默认为 1000</p>
<p>46、RemoteRegionTotalConnectionsPerHost</p>
<p>获取远程地区特定的对等节点上 http 连接的总数，默认为 500</p>
<p>47、RemoteRegionConnectionIdleTimeoutSeconds</p>
<p>http 连接被清理之后远程地区服务器的空闲时间，默认为 30 秒</p>
<p>48、GZipContentFromRemoteRegion（*）</p>
<p>eureka 服务器中获取的内容是否在远程地区被压缩，默认为 true</p>
<p>49、RemoteRegionUrlsWithName</p>
<p>针对远程地区发现的网址域名的 map</p>
<p>50、RemoteRegionUrls</p>
<p>远程地区的 URL 列表</p>
<p>51、RemoteRegionAppWhitelist（*）</p>
<p>必须通过远程区域中检索的应用程序的列表</p>
<p>52、RemoteRegionRegistryFetchInterval</p>
<p>从远程区域取出该注册表的信息的时间间隔，默认为 30 秒</p>
<p>53、RemoteRegionFetchThreadPoolSize</p>
<p>用于执行远程区域注册表请求的线程池的大小，默认为 20</p>
<p>54、RemoteRegionTrustStore</p>
<p>用来合格请求远程区域注册表的信任存储文件，默认为空</p>
<p>55、RemoteRegionTrustStorePassword</p>
<p>获取偏远地区信任存储文件的密码，默认为 “changeit”</p>
<p>56、disableTransparentFallbackToOtherRegion(*)</p>
<p>如果在远程区域本地没有实例运行，对于应用程序回退的旧行为是否被禁用， 默认为 false</p>
<p>57、BatchReplication(*)</p>
<p>表示集群节点之间的复制是否为了网络效率而进行批处理，默认为 false</p>
<p>58、LogIdentityHeaders(*)</p>
<p>Eureka 服务器是否应该登录 clientAuthHeaders，默认为 true</p>
<p>59、RateLimiterEnabled</p>
<p>限流是否应启用或禁用，默认为 false</p>
<p>60、RateLimiterThrottleStandardClients</p>
<p>是否对标准客户端进行限流，默认 false</p>
<p>61、RateLimiterPrivilegedClients（*）</p>
<p>认证的客户端列表，这里是除了标准的 eureka Java 客户端。</p>
<p>62、RateLimiterBurstSize（*）</p>
<p>速率限制的 burst size ，默认为 10，这里用的是令牌桶算法</p>
<p>63、RateLimiterRegistryFetchAverageRate(*)</p>
<p>速率限制器用的是令牌桶算法，此配置指定平均执行注册请求速率，默认为 500</p>
<p>64、RateLimiterFullFetchAverageRate（*）</p>
<p>速率限制器用的是令牌桶算法，此配置指定平均执行请求速率，默认为 100</p>
<p>65、ListAutoScalingGroupsRoleName（*）</p>
<p>用来描述从 AWS 第三账户的自动缩放组中的角色名称，默认为 “ListAutoScalingGroups”</p>
<p>66、JsonCodecName（*）</p>
<p>如果没有设置默认的编解码器将使用全 JSON 编解码器，获取的是编码器的类名称</p>
<p>67、XmlCodecName(*)</p>
<p>如果没有设置默认的编解码器将使用 xml 编解码器，获取的是编码器的类名称</p>
<p>68、BindingStrategy(*)</p>
<p>获取配置绑定 EIP 或 Route53 的策略。</p>
<p>69、Route53DomainTTL（*）</p>
<p>用于建立 route53 域的 ttl，默认为 301</p>
<p>70、Route53BindRebindRetries（*）</p>
<p>服务器尝试绑定到候选 Route53 域的次数，默认为 3</p>
<p>71、Route53BindingRetryIntervalMs（*）</p>
<p>服务器应该检查是否和 Route53 域绑定的时间间隔，默认为 5 <em> 60 </em> 1000 毫秒</p>
<p>72、Experimental(*)</p>
<p>当尝试新功能迁移过程时，为了避免配置 API 污染，相应的配置即可投入实验配置部分，默认为 null</p>
<p>以上是 Eureka 配置项的详细说明，分为 Eureka 客户端配置、Eureka 服务端配置和微服务端配置，一共 100 多项，其中有很多配置参数并不需要我们去修改，使用默认的就好，有些跟我们业务相关的配置参数可根据需要自行设置。</p>
<h2 id="Eureka配置案例"><a href="#Eureka配置案例" class="headerlink" title="Eureka配置案例"></a>Eureka配置案例</h2><h3 id="开发环境服务实例及时下线"><a href="#开发环境服务实例及时下线" class="headerlink" title="开发环境服务实例及时下线"></a>开发环境服务实例及时下线</h3><h5 id="Eureka自我保护机制"><a href="#Eureka自我保护机制" class="headerlink" title="Eureka自我保护机制"></a><a href="https://www.cnblogs.com/xishuai/p/spring-cloud-eureka-safe.html" target="_blank" rel="noopener">Eureka自我保护机制</a></h5><p>Eureka Server 在运行期间会去统计心跳失败比例在 15 分钟之内是否低于 85%，如果低于 85%，Eureka Server 会将这些实例保护起来，让这些实例不会过期，但是在保护期内如果服务刚好这个服务提供者非正常下线了，此时服务消费者就会拿到一个无效的服务实例，此时会调用失败，对于这个问题需要服务消费者端要有一些容错机制，如重试，断路器等。</p>
<p>我们在单机测试的时候很容易满足心跳失败比例在 15 分钟之内低于 85%，这个时候就会触发 Eureka 的保护机制，一旦开启了保护机制，则服务注册中心维护的服务实例就不是那么准确了，此时我们可以使用<code>eureka.server.enable-self-preservation=false</code>来关闭保护机制，这样可以确保注册中心中不可用的实例被及时的剔除（<strong>不推荐</strong>）。</p>
<p>自我保护模式被激活的条件是：在 1 分钟后，<code>Renews (last min) &lt; Renews threshold</code>。</p>
<p>这两个参数的意思：</p>
<ul>
<li><code>Renews threshold</code>：<strong>Eureka Server 期望每分钟收到客户端实例续约的总数</strong>。</li>
<li><code>Renews (last min)</code>：<strong>Eureka Server 最后 1 分钟收到客户端实例续约的总数</strong>。</li>
</ul>
<p>具体的值，我们可以在 Eureka Server 界面可以看到。</p>
<p>Renews threshold 计算代码：</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">this</span><span class="token punctuation">.</span>expectedNumberOfRenewsPerMin <span class="token operator">=</span> count <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>numberOfRenewsPerMinThreshold <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>expectedNumberOfRenewsPerMin <span class="token operator">*</span> serverConfig<span class="token punctuation">.</span><span class="token function">getRenewalPercentThreshold</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>解决方式有三种：</p>
<ul>
<li>关闭自我保护模式（<code>eureka.server.enable-self-preservation</code>设为<code>false</code>），<strong>不推荐</strong>。</li>
<li>降低<code>renewalPercentThreshold</code>的比例（<code>eureka.server.renewal-percent-threshold</code>设置为<code>0.5</code>以下，比如<code>0.49</code>），<strong>不推荐</strong>。</li>
<li>部署多个 Eureka Server 并开启其客户端行为（<code>eureka.client.register-with-eureka</code>不要设为<code>false</code>，默认为<code>true</code>），<strong>推荐</strong>。</li>
</ul>
<p>Eureka 的自我保护模式是有意义的，该模式被激活后，它不会从注册列表中剔除因长时间没收到心跳导致租期过期的服务，而是等待修复，直到心跳恢复正常之后，它自动退出自我保护模式。这种模式旨在避免因网络分区故障导致服务不可用的问题。例如，两个客户端实例 C1 和 C2 的连通性是良好的，但是由于网络故障，C2 未能及时向 Eureka 发送心跳续约，这时候 Eureka 不能简单的将 C2 从注册表中剔除。因为如果剔除了，C1 就无法从 Eureka 服务器中获取 C2 注册的服务，但是这时候 C2 服务是可用的。</p>
<p>所以，Eureka 的自我保护模式最好还是开启它。</p>
<h5 id="开发环境需要及时快速下线配置"><a href="#开发环境需要及时快速下线配置" class="headerlink" title="开发环境需要及时快速下线配置"></a>开发环境需要及时快速下线配置</h5><ul>
<li><p>服务端配置</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
    <span class="token comment" spellcheck="true">#心跳时间间隔（秒）</span>
    <span class="token key atrule">lease-renewal-interval-in-seconds</span><span class="token punctuation">:</span> <span class="token number">5</span>
  <span class="token key atrule">server</span><span class="token punctuation">:</span>
    <span class="token comment" spellcheck="true">#eureka自我保护机制</span>
    <span class="token key atrule">enable-self-preservation</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token comment" spellcheck="true">#删除失效或下线服务间隔 （毫秒），具体删除时间还要加上心跳时间间隔和等待时间间隔</span>
    <span class="token key atrule">eviction-interval-timer-in-ms</span><span class="token punctuation">:</span> <span class="token number">1000</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>客户端配置</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
      <span class="token comment" spellcheck="true">#Eureka客户端向服务端发送心跳的时间间隔（秒）（客户端告诉服务端自己会按照该规则）</span>
    <span class="token key atrule">lease-renewal-interval-in-seconds</span><span class="token punctuation">:</span> <span class="token number">3</span>
    <span class="token comment" spellcheck="true">##Eureka服务端在收到最后一次心跳之后等待的时间上限（秒），超过则剔除（客户端告诉服务端按照此规则等待自己）</span>
    <span class="token key atrule">lease-expiration-duration-in-seconds</span><span class="token punctuation">:</span> <span class="token number">4</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
</ul>

            </div>
            <hr/>

            

            <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    <div class="social-share" data-disabled="qzone" data-wechat-qrcode-helper="<p>微信里点“发现”->“扫一扫”二维码便可查看分享。</p>"></div>
    
</div>

<script src="/libs/share/js/social-share.min.js"></script>

            <div class="reprint">
                <p>
                    <span class="reprint-tip">Reprint please specify: </span>
                    <a href="https://asiacuityz.github.io" class="b-link-green">Asia</a>
                    <i class="fa fa-angle-right fa-lg fa-fw text-color"></i>
                    <a href="/2019/01/28/Eureka配置大全/" class="b-link-green">Eureka配置大全</a>
                </p>
            </div>
        </div>
    </div>

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">Previous</div>
            <div class="card">
                <a href="/2019/02/13/线上CPU使用率过高问题排查/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/1.jpg" class="responsive-img" alt="线上CPU使用率过高问题排查">
                        
                        <span class="card-title">线上CPU使用率过高问题排查</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary">1、故障现象客服同事反馈平台系统运行缓慢，网页卡顿严重，多次重启系统后问题依然存在，使用 top 命令查看服务器情况，发现 CPU 占用率过高。
2、CPU 占用过高问题定位2.1、定位问题进程使用top 命令查看资源占用情况，发现 pid</div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="fa fa-clock-o fa-fw icon-date"></i>2019-02-13
                        </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/线上CPU使用率过高问题排查/" class="post-category" target="_blank">
                                    线上CPU使用率过高问题排查
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/经验/" target="_blank">
                        <span class="chip bg-color">经验</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">Next</div>
            <div class="card">
                <a href="/2019/01/28/Spring-Boot-Starts模块依赖详解/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/11.jpg" class="responsive-img" alt="Spring Boot Starts汇总详解">
                        
                        <span class="card-title">Spring Boot Starts汇总详解</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary">Spring Boot Starters 列表spring-boot-starters 模块列表



名称
描述
Pom




spring-boot-starter
核心 starter，包括自动配置支持，日志和 YAML
Pom

</div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="fa fa-clock-o fa-fw icon-date"></i>2019-01-28
                            </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Spring-Boot-Starts/" class="post-category" target="_blank">
                                    Spring Boot Starts
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Spring-Boot/" target="_blank">
                        <span class="chip bg-color">Spring Boot</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>
</div>


    </div>
    <div class="col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title">TOC</div>
            <div id="toc-content">

            </div>
        </div>
    </div>
</div>

<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingSelector: 'h1, h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });
    });
</script>
    

</main>


<footer class="page-footer bg-color">
    <div class="container row center-align">
        <div class="col s12 m8 l8 copy-right">
            <!--本站由&copy;<a href="https://blinkfox.github.io/" target="_blank">Blinkfox</a>基于
            <a href="https://hexo.io/" target="_blank">Hexo</a> 采用
            <a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">hexo-theme-matery</a>的主题搭建. -->
        </div>
        <div class="col s12 m4 l4 social-link"><a href="https://github.com/blinkfox" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
    <i class="fa fa-github"></i>
</a>
<a href="asiacuiyz@gmail.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
    <i class="fa fa-envelope-open"></i>
</a>
<a href="#!" class="tooltipped" data-tooltip="QQ联系我: 476494273" data-position="top" data-delay="50">
    <i class="fa fa-qq"></i>
</a>
</div>
    </div>
</footer>

<div class="progress-bar"></div>


<!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title">Search</span>
            <input type="search" id="searchInput" name="s" placeholder="Please enter a search keyword"
                   class="search-input" autofocus="">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
    searchFunc("/" + "search.xml", 'searchInput', 'searchResult');
</script>
<!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fa fa-angle-up"></i>
    </a>
</div>


<script src="/libs/materialize/js/materialize.min.js"></script>
<script src="/libs/masonry/masonry.pkgd.min.js"></script>
<script src="/libs/aos/aos.js"></script>
<script src="/libs/scrollprogress/scrollProgress.min.js"></script>
<script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>

<script src="/js/matery.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-131536389-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());
    gtag('config', 'UA-131536389-1');
</script>


</body>
</html>